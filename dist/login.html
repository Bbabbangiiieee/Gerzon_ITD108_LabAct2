<!DOCTYPE html>
<html>
    <head>
        <title>GettingStartedWithFirebase</title>
        <script defer src="./bundle.js"></script>
        <style>
            body{
             background-image: linear-gradient(to right, #f3ced2, #cdb8cc);
            }
            h1{
                 padding-top: 80px;
                 text-align: center;
                 font:'Franklin Gothic Medium';
                 font-size: 40px;
             }
             h2{
                 text-align: center;
                 padding-bottom: 15px;
             }
             p{
                 text-align: center;
                 padding-top: 50px;
             }
             button{
                 background-color: #cdb8cc;
                 border-radius: 10px;
                 width: 100px;
                 height: 33px;
             }
             button:hover{
                 background-color: #f3ced2;
             }
             .container{
                 background-image: url('images/background.jpg');
                 width: 350px;
                 height:500px;
                 margin: auto;
                 border-radius: 30px;
                 box-shadow: 0 6px 10px 0;
             }
             .input{
                 text-align: center;
             }
             .email{
                 padding-bottom: 10px;
             }
             .password{
                 padding-bottom: 25px;
             }
             .form-input{
                 border-radius: 10px;
                 height: 25px;
             }
         </style>
    </head>
    <body>
        <form name="login_form" id="login_form" method="post" action="register.html" enctype="multipart/form-data">
            <div class="container">
                <h1>WELCOME!!!</h1>
                <h2>Login</h2>
                <div class="input email">
                    <label style="margin-left: -133px">Email</label><br>
                    <input type="text" name="email" id="login_email" class="form-input" placeholder="Email" pattern="[^@\s]+@[^@\s]+\.[^@\s]+" title="Invalid email address">
                </div>
                <div class="input password">
                    <label style="margin-left: -108px">Password</label><br>
                    <input type="password" id="login_password" name="password" class="form-input" placeholder="Password">
                </div>
                <div class="input">
                    <button type="button" id="login" name="login">Log in</button>
                </div>
                <p>Don't have an account? <a href="index.html">Register</a></p>
            </div>
        </form>
    </body>
</html>

<script type="module">

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
  apiKey: "AIzaSyDU7Sc9_WqIIHN6siYrIUKqPf-5404y5DY",
  authDomain: "gettingstartedwithfireba-d38f6.firebaseapp.com",
  projectId: "gettingstartedwithfireba-d38f6",
  storageBucket: "gettingstartedwithfireba-d38f6.appspot.com",
  messagingSenderId: "777429333088",
  appId: "1:777429333088:web:501f9362711dfa57157f05",
  measurementId: "G-SGMYE7X6HQ"
};
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();
    console.log(app);

    //----- Login code start	  
    document.getElementById("login").addEventListener("click", function() {
      var email =  document.getElementById("login_email").value;
      var password = document.getElementById("login_password").value;
    
      signInWithEmailAndPassword(auth, email, password).then((userCredential) => {
        // Signed in 
        const user = userCredential.user;
        console.log(user);
        alert(user.email+" Login successfully!!!");
        window.location.href = 'page.html';	
        
        // ...
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log(errorMessage);
        alert(errorMessage);
      });		  		  
    });
    //----- End
</script>